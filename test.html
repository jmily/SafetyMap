
<!DOCTYPE html>
<meta charset="utf-8">
<style>
.text{position:absolute; top:120px; left: 200px;}
</style>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://d3js.org/topojson.v1.min.js"></script>

<div id="vis">
</div>
<script>

var w = 960;
var h = 800;
var proj = d3.geo.mercator() .center([144.8,-37.68]).scale(19000);
var path = d3.geo.path().projection(proj);
var t = proj.translate(); // the projection's default translation
var s = proj.scale() // the projection's default scale

var map = d3.select("#vis").append("svg:svg")
        .attr("width", w)
        .attr("height", h)
        .call(d3.behavior.zoom().on("zoom", redraw))
        .append("svg:g");

var axes = map.append("svg:g").attr("id", "axes");

var xAxis = axes.append("svg:line")
        .attr("x1", t[0])
        .attr("y1", 0)
        .attr("x2", t[0])
        .attr("y2", h);

var yAxis = axes.append("svg:line")
        .attr("x1", 0)
        .attr("y1", t[1])
        .attr("x2", w)
        .attr("y2", t[1]);

var uk = map.append("svg:g").attr("id", "uk");




    d3.json("pop.json", function(error, pop) {

        uk.selectAll("path")
                .data(topojson.feature(pop, pop.objects.population).features)
                .enter().append("svg:path")
                .attr("d", path)
                .attr("fill",function(d){
//                    console.log(d.features[0].properties.Total_Pop);

                    var pop = d.properties.Total_Pop;
                    if( pop<5000)
                    {
                        return "#E4E500";
                    }
                    else if (pop >= 5000 && pop <10000)
                    {
                        return "#E5A200";
                    }
                    else if (pop >= 10000 && pop<15000)
                    {
                        return "#E56C00";
                    }
                    else if(pop > 15000 && pop<20000)
                    {
                        return "#E54000";
                    }
                    else
                    return "#E50005";
                })
//                .style("stroke","black")
                .on("mouseover", function(d){
                    d3.select(this).style("stroke","black");
                    d3.select(this).style("stroke-width","3");
                    d3.select("#location").html(d.properties.SA2_NAME);
                    d3.select("#pop").html(d.properties.Total_Pop);
                })
                .on("mouseout", function(d){
                    d3.select(this).style("stroke","none")

                });
    });

    function redraw() {
        // d3.event.translate (an array) stores the current translation from the parent SVG element
        // t (an array) stores the projection's default translation
        // we add the x and y vales in each array to determine the projection's new translation
        var tx = t[0] * d3.event.scale + d3.event.translate[0];
        var ty = t[1] * d3.event.scale + d3.event.translate[1];
        proj.translate([tx, ty]);

        // now we determine the projection's new scale, but there's a problem:
        // the map doesn't 'zoom onto the mouse point'
        proj.scale(s * d3.event.scale);

        // redraw the map
        uk.selectAll("path").attr("d", path);

        // redraw the x axis
        xAxis.attr("x1", tx).attr("x2", tx);

        // redraw the y axis
        yAxis.attr("y1", ty).attr("y2", ty);
    }




</script>



<div class="text">

       <h2>Location</h2><p id="location"></p>
    <h2>Population</h2> <p id="pop"></p>
    </div>